<!doctype html>
<html lang="pt-br">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Central de Ferramentas - Talentos</title>
  <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' width='128' height='128'><text y='1em' font-size='90'>üîê</text></svg>">
  <style>
    body{margin:0;font-family:system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Helvetica,Arial,sans-serif;background:#eff3ff;}
    .wrap{max-width:980px;margin:40px auto;padding:24px;background:#fff;border-radius:18px;box-shadow:0 10px 35px rgba(0,20,120,.12)}
    .title{font-size:28px;font-weight:800;margin:0 0 6px;color:#1f3aad}
    .muted{color:#536087;margin:0 0 18px}
    #userbar{display:none;gap:10px;align-items:center;background:#0b3bda;color:#fff;padding:8px 12px;border-bottom-left-radius:10px;border-bottom-right-radius:10px}
    #logout{all:unset;background:#fff;color:#0b3bda;font-weight:600;padding:6px 10px;border-radius:999px;cursor:pointer}
    .links a{display:inline-block;margin:8px 10px 0 0;padding:10px 14px;background:#0b3bda;color:#fff;border-radius:10px;text-decoration:none}
    .links a:hover{opacity:.9}
  </style>
</head>
<body>
  <div id="userbar">
    <span id="uemail"></span>
    <button id="logout">Sair</button>
  </div>

  <main class="wrap">
    <h1 class="title">Bem-vindo(a) √† sua Central de Ferramentas</h1>
    <p class="muted">Escolha uma das ferramentas abaixo. O acesso √© restrito a contas @talentosconsultoria.com.br.</p>

    <div class="links">
      <a href="qlp-format.html">QLP</a>
      <a href="pdf-tool.html">PDF</a>
      <a href="format-bancodoc.html">Bdoc</a>
    </div>
  </main>

  <!-- Firebase (compat) -->
  <script src="https://www.gstatic.com/firebasejs/9.6.11/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.6.11/firebase-auth-compat.js"></script>
  <script>
    // TODO: substitua pelos dados do seu projeto (Console Firebase > Configura√ß√µes > SDK Web):
    const firebaseConfig = {
      apiKey: "SUA_API_KEY",
      authDomain: "talentosbd-e4206.firebaseapp.com",
      projectId: "talentosbd-e4206",
      appId: "SEU_APP_ID"
    };
    firebase.initializeApp(firebaseConfig);

    const ORG_DOMAIN = "talentosconsultoria.com.br";
    const LOGIN_PAGE = "login.html";

    function pageName(){ return location.pathname.split('/').pop() || "index.html"; }
    function goLogin(reason){
      const ret = encodeURIComponent(pageName());
      location.replace(`${LOGIN_PAGE}?return=${ret}${reason?`&reason=${reason}`:''}`);
    }

    // Guard: exige sess√£o v√°lida + email do dom√≠nio corporativo
    firebase.auth().onAuthStateChanged(async (user)=>{
      if(!user){ goLogin("no-session"); return; }
      const em = (user.email||"").toLowerCase();
      if(!em.endsWith(`@${ORG_DOMAIN}`)){
        await firebase.auth().signOut();
        goLogin("wrong-domain");
        return;
      }
      // Sess√£o OK -> exibe barra de usu√°rio
      document.getElementById("uemail").textContent = em;
      document.getElementById("userbar").style.display = "flex";
    });

    // Sair
    document.getElementById("logout").addEventListener("click", async ()=>{
      await firebase.auth().signOut();
      goLogin("logout");
    });
  </script>
</body>
</html>
