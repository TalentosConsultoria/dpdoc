<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>DPDoc • Central de Ferramentas</title>

  <!-- Tailwind -->
  <script src="https://cdn.tailwindcss.com"></script>

  <!-- Firebase (Compat) -->
  <script src="https://www.gstatic.com/firebasejs/10.12.4/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.12.4/firebase-auth-compat.js"></script>

  <!-- Config + Guard (com versionamento para bust de cache) -->
  <script src="./config.js?v=20250812"></script>
  <script src="./auth-guard.js?v=20250812"></script>

  <style>body{background:#f7f7f9}</style>
</head>
<body class="min-h-screen flex flex-col">
  <!-- Header fixo no topo -->
  <header class="bg-white/95 backdrop-blur sticky top-0 z-50 border-b">
    <div class="max-w-5xl mx-auto px-4 h-16 flex items-center justify-between">
      <!-- Marca -->
      <a href="./index.html" class="flex items-center gap-3">
        <img src="https://media.glassdoor.com/sql/2733569/talentos-consultoria-squarelogo-1649741391944.png"
             alt="Talentos" class="w-9 h-9 rounded-full">
        <h1 class="text-base md:text-lg font-semibold">Talentos Consultoria — DPDoc</h1>
      </a>

      <!-- Navegação -->
      <nav class="flex items-center gap-3">
        <!-- Menu Ferramentas -->
        <div class="relative">
          <button id="btnMenu" class="hidden md:inline-flex items-center gap-2 px-3 py-2 rounded-lg border hover:bg-gray-50">
            Ferramentas
            <svg xmlns="http://www.w3.org/2000/svg" class="w-4 h-4" viewBox="0 0 24 24" fill="none" stroke="currentColor">
              <path d="M6 9l6 6 6-6"/>
            </svg>
          </button>
          <!-- Dropdown -->
          <div id="menu" class="absolute right-0 mt-2 w-72 bg-white rounded-xl shadow-lg border p-2 hidden">
            <a href="./qlp-format.html" class="block px-3 py-2 rounded-lg hover:bg-gray-50">Formatador QLP</a>
            <a href="./format-bancodoc.html" class="block px-3 py-2 rounded-lg hover:bg-gray-50">Unificação de Planilhas: QLP - Bancodoc</a>
            <a href="./pdf-tool.html" class="block px-3 py-2 rounded-lg hover:bg-gray-50">Juntar / Reorganizar PDFs</a>
          </div>
        </div>

        <!-- Botão Sair (sempre visível no header, ao lado das ferramentas) -->
        <button id="btnLogout" class="inline-flex items-center gap-2 px-3 py-2 rounded-lg border hover:bg-gray-50">
          <svg xmlns="http://www.w3.org/2000/svg" class="w-4 h-4" viewBox="0 0 24 24" fill="none" stroke="currentColor">
            <path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"/>
            <path d="M16 17l5-5-5-5"/>
            <path d="M21 12H9"/>
          </svg>
          Sair
        </button>

        <!-- Menu mobile -->
        <button id="btnMobile" class="md:hidden inline-flex items-center justify-center w-9 h-9 rounded-lg border hover:bg-gray-50" aria-label="Menu">
          <svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5" viewBox="0 0 24 24" fill="none" stroke="currentColor">
            <path d="M3 6h18M3 12h18M3 18h18"/>
          </svg>
        </button>
      </nav>
    </div>

    <!-- Drawer mobile -->
    <div id="drawer" class="md:hidden border-t bg-white hidden">
      <div class="max-w-5xl mx-auto px-4 py-3 space-y-1">
        <a href="./qlp-format.html" class="block px-3 py-2 rounded-lg hover:bg-gray-50">Formatador QLP</a>
        <a href="./format-bancodoc.html" class="block px-3 py-2 rounded-lg hover:bg-gray-50">Unificação de Planilhas: QLP - Bancodoc</a>
        <a href="./pdf-tool.html" class="block px-3 py-2 rounded-lg hover:bg-gray-50">Juntar / Reorganizar PDFs</a>
        <button id="btnLogoutMobile" class="w-full mt-2 inline-flex items-center justify-center gap-2 px-3 py-2 rounded-lg border hover:bg-gray-50">
          Sair
        </button>
      </div>
    </div>
  </header>

  <!-- Conteúdo principal (sem o bloco de exemplo do Firestore) -->
  <main class="flex-1 grid place-items-center px-4">
    <section class="bg-white rounded-2xl shadow p-8 max-w-3xl w-full text-center">
      <h2 class="text-3xl font-bold mb-3">Bem‑vindo(a) à sua Central de Ferramentas</h2>
      <p class="text-gray-600">Use o menu <b>Ferramentas</b> no topo para abrir o que você precisa.</p>
    </section>
  </main>

  <footer class="text-center text-sm text-gray-500 py-6">© 2025 Talentos Consultoria</footer>

  <script>
    // Toggle dropdown (desktop)
    const btnMenu = document.getElementById('btnMenu');
    const menu = document.getElementById('menu');
    if (btnMenu && menu) {
      btnMenu.addEventListener('click', () => menu.classList.toggle('hidden'));
      document.addEventListener('click', (e) => {
        if (!menu.contains(e.target) && !btnMenu.contains(e.target)) menu.classList.add('hidden');
      });
    }

    // Drawer mobile
    const btnMobile = document.getElementById('btnMobile');
    const drawer = document.getElementById('drawer');
    if (btnMobile && drawer) {
      btnMobile.addEventListener('click', () => drawer.classList.toggle('hidden'));
    }

    // Botões de logout
    function wireLogout(el) {
      if (!el) return;
      el.addEventListener('click', async () => {
        try {
          if (window.logoutTalentos) {
            await window.logoutTalentos();
          } else if (window.firebase?.auth) {
            await firebase.auth().signOut();
            location.replace((window.TalentosConfig && TalentosConfig.LOGIN_PAGE) || "login.html");
          } else {
            location.replace("login.html");
          }
        } catch(e) { console.error(e); }
      });
    }
    wireLogout(document.getElementById('btnLogout'));
    wireLogout(document.getElementById('btnLogoutMobile'));
  </script>

  <!-- Proteção de rota -->
  <script>try{ TalentosAuthGuard && TalentosAuthGuard.protect(); }catch(e){ console.error(e); }</script>
</body>
</html>
