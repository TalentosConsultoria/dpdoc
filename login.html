<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Login • Talentos Intranet</title>
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="referrer" content="no-referrer" />
  <meta http-equiv="Permissions-Policy" content="interest-cohort=()">
  <meta http-equiv="Cache-Control" content="no-store" />
  <link rel="preconnect" href="https://alcdn.msauth.net">
  <style>
    body{margin:0;font-family:system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,sans-serif;background:#0b1020;color:#e5e7eb;min-height:100vh;display:grid;place-items:center}
    .card{width:min(480px,92vw);background:rgba(16,25,50,.92);border:1px solid rgba(255,255,255,.08);border-radius:16px;padding:24px;box-shadow:0 10px 40px rgba(0,0,0,.35)}
    h1{margin:0 0 12px 0;font-weight:600}
    p{opacity:.85;margin:.25rem 0 1rem 0}
    button{appearance:none;border:0;border-radius:10px;padding:12px 16px;background:#196dff;color:#fff;cursor:pointer;font-weight:600}
    button:hover{filter:brightness(1.05)}
    .muted{font-size:.9rem;opacity:.8;margin-top:10px}
  </style>
  <script src="./auth.js" defer></script>
  <script>
    document.addEventListener('DOMContentLoaded', async ()=>{
      if (window.TalentosAuth) {
        // tenta autenticar silenciosamente / completar o redirect
        await window.TalentosAuth.beginLogin();
      }
    });
    function entrar(){ window.TalentosAuth && window.TalentosAuth.beginLogin(); }
  </script>

    
    <!-- Resilient loader MSAL: local vendor -> jsDelivr -> unpkg -> alcdn (fallback) -->
    <script>
    (function() {
      var tried = [];
      function inject(src, next){
        tried.push(src);
        var s=document.createElement('script'); s.src=src; s.defer=true;
        s.onload=function(){ /* ok */ };
        s.onerror=function(){ next && next(); };
        document.head.appendChild(s);
      }
      function start(){
        if (window.msal && window.msal.PublicClientApplication) return;
        var chain = [
          function(n){ inject('/vendor/msal-browser.min.js', n); },
          function(n){ inject('https://cdn.jsdelivr.net/npm/@azure/msal-browser@2.38.3/dist/msal-browser.min.js', n); },
          function(n){ inject('https://cdn.jsdelivr.net/npm/@azure/msal-browser@latest/dist/msal-browser.min.js', n); },
          function(n){ inject('https://unpkg.com/@azure/msal-browser@2.38.3/dist/msal-browser.min.js', n); },
          function(n){ inject('https://unpkg.com/@azure/msal-browser@latest/dist/msal-browser.min.js', n); },
          function(n){ inject('https://alcdn.msauth.net/browser/2.38.3/js/msal-browser.min.js', n); },
          function(n){ console.error('Falha ao carregar MSAL de todas as origens. Tentativas:', tried); }
        ];
        (function run(i){ chain[i](function(){ run(i+1); }); })(0);
      }
      if (document.readyState !== 'loading') start();
      else document.addEventListener('DOMContentLoaded', start);
    })();
    </script>

</head>
<body>
  <div class="card">
    <h1>Entrar na Intranet</h1>
    <p>Use sua conta corporativa @talentosconsultoria.com.br para continuar.</p>
    <button onclick="entrar()">Entrar com Microsoft</button>
    <div class="muted">Se o login não iniciar automaticamente, clique no botão.</div>
  </div>
</body>
</html>
